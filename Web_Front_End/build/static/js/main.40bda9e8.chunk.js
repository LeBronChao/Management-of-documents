(this.webpackJsonpmanage_of_doc=this.webpackJsonpmanage_of_doc||[]).push([[0],{270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},406:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},521:function(e,t,a){},527:function(e,t,a){},528:function(e,t,a){},529:function(e,t,a){},530:function(e,t,a){},531:function(e,t,a){},532:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(0),s=a.n(n),i=a(27),o=a.n(i),r=(a(270),a(271),a(38)),l=a(14),d=a(46),u=a(134),j=a(538),b=a(153),h=a(535),O=a(539),m=(a(272),a(36)),x=a.n(m);x.a.defaults.baseURL="https://docsback-1g00m41c717f8e91-1304295623.ap-shanghai.app.tcloudbase.com",x.a.interceptors.request.use((function(e){var t=sessionStorage.getItem("sztu_doc_token");return e.headers.Authorization=t,e}),(function(e){return Promise.reject(e)})),x.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(alert("\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u9646"),window.location.href="/Home/Login"),Promise.reject(e)}));var f={login:"/User/Login",register:"/User/Register",docList:"/Doc/GetList",docClick:"/Doc/Click",docPub:"/Doc/Pub",docFile:"/Doc/File",detail:"/Doc/Get",exmList:"/Doc/ExmList",docExm:"/Doc/Exm",docDelete:"/Doc/Delete",userDelete:"/User/Delete",userList:"/User/GetList",userUpdate:"/User/Update",userQuery:"/User/Query"};function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c={type:t,title:a};x.a.post(f.docList,c).then((function(t){e(t.data.Doc)})).catch((function(e){console.log(e)}))}var g=["\u5927\u6570\u636e\u4e0e\u4e92\u8054\u7f51\u5b66\u9662","\u4e2d\u5fb7\u667a\u80fd\u5236\u9020\u5b66\u9662","\u521b\u610f\u4e0e\u8bbe\u8ba1\u5b66\u9662","\u5065\u5eb7\u4e0e\u73af\u5883\u5de5\u7a0b\u5b66\u9662","\u65b0\u80fd\u6e90\u4e0e\u65b0\u6750\u6599\u5b66\u9662","\u57ce\u5e02\u4ea4\u901a\u4e0e\u7269\u6d41\u5b66\u9662","\u5546\u5b66\u9662","\u836f\u5b66\u9662","\u4f53\u80b2\u4e0e\u827a\u672f\u5b66\u9662\u4f53\u80b2\u4e0e\u827a\u672f\u5b66\u9662","\u8d28\u91cf\u4e0e\u6807\u51c6\u5b66\u9662","\u5de5\u7a0b\u7269\u7406\u5b66\u9662","\u7814\u7a76\u751f\u9662","\u515a\u59d4\u7ec4\u7ec7\u90e8","\u515a\u59d4\u5ba3\u4f20\u90e8","\u515a\u653f\u529e\u516c\u5ba4","\u79d1\u7814\u4e0e\u6821\u4f01\u5408\u4f5c\u90e8","\u56fd\u9645\u5408\u4f5c\u4e0e\u5b66\u751f\u5de5\u4f5c\u90e8","\u91c7\u8d2d\u4e0e\u62db\u6295\u6807\u7ba1\u7406\u4e2d\u5fc3","\u4fe1\u606f\u4e2d\u5fc3","\u6821\u533b\u9662","\u521b\u4e1a\u521b\u5ba2\u4e0e\u5c31\u4e1a\u6307\u5bfc\u4e2d\u5fc3","\u56fd\u6709\u8d44\u4ea7\u4e0e\u5b9e\u9a8c\u5ba4\u7ba1\u7406\u90e8","\u6559\u52a1\u90e8","\u8ba1\u5212\u8d22\u52a1\u90e8","\u56fe\u4e66\u9986","\u5b89\u5168\u4fdd\u536b\u4e2d\u5fc3","\u540e\u52e4\u4fdd\u969c\u90e8","\u6821\u56e2\u59d4"],v=["\u5168\u90e8\u4fe1\u606f","\u6559\u5b66\u6559\u52a1","\u5b66\u672f\u79d1\u7814","\u884c\u653f\u901a\u77e5","\u5b66\u751f\u5de5\u4f5c","\u6821\u56ed\u751f\u6d3b"],y=["\u8d85\u7ea7\u7ba1\u7406\u5458","\u603b\u7ba1\u7406\u5458","\u90e8\u95e8\u7ba1\u7406\u5458","\u666e\u901a\u7528\u6237"],w=j.a.Search;var _=function(e){var t=Object(n.useState)("\u5168\u90e8\u4fe1\u606f"),a=Object(l.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)([]),r=Object(l.a)(o,2),d=r[0],j=r[1],m=Object(n.useState)(!0),g=Object(l.a)(m,2),y=g[0],_=g[1],N=[{title:"\u5e8f\u53f7",dataIndex:"doc_no",key:"doc_no",align:"center",width:"60px"},{title:"\u7c7b\u522b",dataIndex:"type",key:"type",align:"center",width:"110px"},{title:"\u53d1\u6587\u5355\u4f4d",dataIndex:"unit",key:"unit",align:"center",width:"188px"},{title:"\u516c\u6587\u6807\u9898",dataIndex:"title",key:"title",align:"center",width:"506px",render:function(e){var t={};return t.color=1==e[1]?"red":"black",t.fontWeight=e[2]?700:400,Object(c.jsx)("div",{style:t,children:e[0]})}},{title:"\u9644\u4ef6",dataIndex:"file",key:"file",align:"center",width:"100px",render:function(e){return e?Object(c.jsx)(O.a,{style:{width:"24px",height:"24px"}}):void 0}},{title:"\u53d1\u6587\u65e5\u671f",dataIndex:"date",key:"date",align:"center",width:"116px"}];function k(e){for(var t=0;t<e.length;t++){var a=[e[t].title,e[t].color,e[t].bold];e[t].title=a,e[t].date=e[t].date.slice(0,10),delete e[t].color,delete e[t].bold}j(e),setTimeout((function(){_(!1)}),500)}return Object(n.useEffect)((function(){p(k,s)}),[]),Object(n.useEffect)((function(){i(s)}),[s]),Object(n.useEffect)((function(){j(d)}),[d]),Object(c.jsx)("div",{className:"sp",style:{width:"1440px"},children:Object(c.jsxs)("div",{className:"doclist-container",children:[Object(c.jsxs)("div",{className:"doclist-header row",children:[Object(c.jsx)("nav",{className:"doclist-header-nav row",children:Object(c.jsx)(b.a.Group,{value:s,onChange:function(e){_(!0),i(e.target.value),p(k,e.target.value)},children:v.map((function(e){return Object(c.jsx)(b.a.Button,{value:e,children:e},e)}))})}),Object(c.jsx)(w,{placeholder:"\u8f93\u5165\u6807\u9898\u641c\u7d22",allowClear:!0,onSearch:function(e){p(k,s,e),_(!0)},style:{width:360,margin:"0 0 0 316px "}})]}),Object(c.jsx)("main",{className:"doclist-body",children:Object(c.jsx)(h.a,Object(u.a)({dataSource:d,columns:N,loading:y,pagination:{pageSize:12},rowKey:function(e){return e.doc_no},onRow:function(t){return{onClick:function(a){!function(e){var t={doc_no:e};x.a.post(f.docClick,t).then((function(e){e.data.status?console.log("\u70b9\u51fb\u91cf+1"):alert(e.data.errmsg)})).catch((function(e){console.log(e)}))}(t.doc_no),e.history.push("/Doc/Detail/".concat(t.doc_no))}}}},"rowKey",(function(e){return e.doc_no})))})]})})},N=a(123),k=a(124),S=a(53),D=a(540),C=a(179),I=a.n(C),z=a(252);function L(){return(L=Object(z.a)(I.a.mark((function e(t,a,c,n,s,i,o,r,l,d){var u,j,b,h,O,m;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O="",!r){e.next=4;break}return e.next=4,x.a.post(f.docFile,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){h=e.data.status,u=e.data.file_path,j=e.data.houzhui})).catch((function(e){console.log(e)}));case 4:return m={color:c?1:0,bold:n?1:0,type:t,title:a,text:s,text_html:i,unit:o,file_name:l,file_path:u,houzhui:j},e.next=7,x.a.post(f.docPub,m).then((function(e){b=e.data.status,O+=e.data.errmsg})).catch((function(e){console.log(e)}));case 7:r||(h=!0),b&&h?(d(),alert("\u53d1\u5e03\u6210\u529f\uff01")):alert("\u53d1\u5e03\u5931\u8d25"+O);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(406),a(407);var F=a(180),E=a.n(F),H=N.a.Option;var M=function(e){var t=JSON.parse(sessionStorage.getItem("sztu_doc_user")),a=Object(n.useState)(""),s=Object(l.a)(a,2),i=s[0],o=s[1],r=Object(n.useState)(""),d=Object(l.a)(r,2),u=d[0],h=d[1],O=Object(n.useState)(!1),m=Object(l.a)(O,2),x=m[0],f=m[1],p=Object(n.useState)(!1),y=Object(l.a)(p,2),w=y[0],_=y[1],C=Object(n.useState)(E.a.createEditorState(null)),I=Object(l.a)(C,2),z=I[0],F=I[1],M=Object(n.useState)(""),T=Object(l.a)(M,2),P=T[0],U=T[1],B=Object(n.useState)(""),q=Object(l.a)(B,2),J=q[0],R=q[1],V=Object(n.useState)(t.unit),G=Object(l.a)(V,2),K=G[0],Q=G[1],$=Object(n.useState)(""),W=Object(l.a)($,2),Y=W[0],A=W[1],X=Object(n.useState)(t.jur>=2),Z=Object(l.a)(X,2),ee=Z[0],te=(Z[1],Object(n.useRef)()),ae=Object(n.useRef)();function ce(){e.history.push("/Doc/DocManage")}return Object(n.useEffect)((function(){o(i),h(u),_(w),f(x)}),[i,u,x,w]),Object(c.jsx)("div",{className:"doc-pub-page sp",children:Object(c.jsxs)("div",{className:"doc-pub-container col",children:[Object(c.jsxs)("div",{className:"doc-pub-table col",children:[Object(c.jsxs)("div",{className:"doc-pub-table-row1 row cz",children:[Object(c.jsx)("div",{className:"doc-pub-table-title",children:"\u7c7b\u522b"}),Object(c.jsx)(b.a.Group,{onChange:function(e){return o(e.target.value)},value:i,children:v.slice(1).map((function(e){return Object(c.jsx)(b.a,{value:e,children:e},e)}))})]}),Object(c.jsxs)("div",{className:"doc-pub-table-row1 row cz",children:[Object(c.jsx)("div",{className:"doc-pub-table-title",children:"\u6807\u9898"}),Object(c.jsx)(j.a,{style:{width:"399px"},value:u,onChange:function(e){return h(e.target.value)}}),Object(c.jsxs)(b.a.Group,{onChange:function(e){return f(e.target.value)},value:x,className:"doc-pub-color-radio row",children:[Object(c.jsx)(b.a,{value:!1,className:"row cz",children:Object(c.jsx)("div",{className:"doc-pub-color-box doc-pub-color-black cz"})}),Object(c.jsx)(b.a,{value:!0,className:"row cz",children:Object(c.jsx)("div",{className:"doc-pub-color-box doc-pub-color-red cz"})})]}),Object(c.jsx)(k.a,{onChange:function(e){_(e.target.checked)},checked:w,children:"\u7c97\u4f53"})]}),Object(c.jsxs)("div",{className:"doc-pub-table-row2 row cz",children:[Object(c.jsx)("div",{className:"doc-pub-table-title",children:"\u6b63\u6587"}),Object(c.jsx)(E.a,{className:"doc-pub-table-edit",value:z,onChange:function(e){F(e),U(e.toText()),R(e.toHTML())},ref:te})]}),Object(c.jsxs)("div",{className:"doc-pub-table-row1 row cz",style:{zIndex:6},children:[Object(c.jsx)("div",{className:"doc-pub-table-title",style:{marginLeft:32},children:"\u53d1\u6587\u90e8\u95e8"}),Object(c.jsx)(N.a,{defaultValue:"",style:{width:200},allowClear:!0,value:K,onChange:function(e){Q(e)},disabled:ee,children:g.map((function(e){return Object(c.jsx)(H,{value:e,children:e},e)}))})]}),Object(c.jsxs)("div",{className:"doc-pub-table-row1 row cz",children:[Object(c.jsx)("div",{className:"doc-pub-table-title",style:{marginLeft:32},children:"\u4e0a\u4f20\u9644\u4ef6"}),Object(c.jsx)(S.a,{icon:Object(c.jsx)(D.a,{}),shape:"round",onClick:function(){ae.current.click()},children:"\u9009\u62e9\u6587\u4ef6"}),Object(c.jsx)("input",{type:"file",ref:ae,style:{display:"none"},onChange:function(e){A(e.target.files[0].name)}}),Object(c.jsx)("div",{style:{marginLeft:10},children:Y})]})]}),Object(c.jsxs)("div",{className:"doc-pub-button-container center",children:[Object(c.jsx)(S.a,{shape:"round",style:{width:160,height:40,background:"#1990FF",color:"white",fontSize:15},onClick:function(){var e,t="\u8bf7\u586b\u5199",a=!1;i||(a=!0,t+="\u516c\u6587\u7c7b\u522b "),u||(a=!0,t+="\u516c\u6587\u6807\u9898 "),P||(a=!0,t+="\u516c\u6587\u6b63\u6587 "),K||(a=!0,t+="\u53d1\u6587\u90e8\u95e8 "),a?alert(t):(ae.current.files[0]&&(e=new FormData).append("avatar",ae.current.files[0]),function(e,t,a,c,n,s,i,o,r,l){L.apply(this,arguments)}(i,u,x,w,P,J,K,e,Y,ce))},children:"\u53d1\u5e03"}),Object(c.jsx)(S.a,{shape:"round",style:{width:160,height:40,fontSize:15,marginLeft:20},onClick:function(){o(""),h(""),_(!1),f(null),U(""),R(""),te.current.clearEditorContent(),Q("")},children:"\u6e05\u7a7a"})]})]})})};a(503);function T(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c={type:t,title:a};x.a.post(f.exmList,c).then((function(t){e(t.data.Doc)})).catch((function(e){console.log(e)}))}function P(e,t,a){var c={doc_no:e,status:t};x.a.post(f.docExm,c).then((function(e){e.data.status&&(alert("\u64cd\u4f5c\u6210\u529f\uff01"),a())})).catch((function(e){alert("\u64cd\u4f5c\u5931\u8d25\uff01"),console.log(e)}))}var U=j.a.Search;var B=function(e){var t=Object(n.useState)("\u5168\u90e8\u4fe1\u606f"),a=Object(l.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)([]),r=Object(l.a)(o,2),d=r[0],u=r[1],j=Object(n.useState)(!0),O=Object(l.a)(j,2),m=O[0],x=O[1],f=[{title:"\u5e8f\u53f7",dataIndex:"doc_no",key:"doc_no",align:"center",width:"60px"},{title:"\u7c7b\u522b",dataIndex:"type",key:"type",align:"center",width:"110px"},{title:"\u53d1\u6587\u5355\u4f4d",dataIndex:"unit",key:"unit",align:"center",width:"188px"},{title:"\u516c\u6587\u6807\u9898",dataIndex:"title",key:"title",align:"center",width:"506px",render:function(e){var t={};return t.color=1==e[1]?"red":"black",t.fontWeight=e[2]?700:400,Object(c.jsx)("div",{style:t,children:e[0]})}},{title:"\u70b9\u51fb\u91cf",dataIndex:"click_count",key:"click_count",align:"center",width:"80px"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",align:"center",width:"104px",render:function(e){switch(e){case 0:return Object(c.jsx)("div",{style:{color:""},children:"\u672a\u5ba1\u6279"});case 1:return Object(c.jsx)("div",{style:{color:"#4CF140"},children:"\u5ba1\u6279\u901a\u8fc7"});case 2:return Object(c.jsx)("div",{style:{color:"red"},children:"\u5ba1\u6279\u4e0d\u901a\u8fc7"})}}},{title:"\u53d1\u6587\u65e5\u671f",dataIndex:"date",key:"date",align:"center",width:"116px"}];function p(e){for(var t=0;t<e.length;t++){var a=[e[t].title,e[t].color,e[t].bold];e[t].title=a,e[t].date=e[t].date.slice(0,10),delete e[t].color,delete e[t].bold}u(e),setTimeout((function(){x(!1)}),500)}return Object(n.useEffect)((function(){T(p,s)}),[]),Object(n.useEffect)((function(){i(s)}),[s]),Object(n.useEffect)((function(){u(d)}),[d]),Object(c.jsx)("div",{className:"sp",style:{width:"1440px"},children:Object(c.jsxs)("div",{className:"doclist-container",children:[Object(c.jsxs)("div",{className:"doclist-header row",children:[Object(c.jsx)("nav",{className:"doclist-header-nav row",children:Object(c.jsx)(b.a.Group,{value:s,onChange:function(e){x(!0),i(e.target.value),T(p,e.target.value)},children:v.map((function(e){return Object(c.jsx)(b.a.Button,{value:e,children:e},e)}))})}),Object(c.jsx)(U,{placeholder:"\u8f93\u5165\u6807\u9898\u641c\u7d22",allowClear:!0,onSearch:function(e){T(p,s,e),x(!0)},style:{width:360,margin:"0 0 0 316px "}})]}),Object(c.jsx)("main",{className:"doclist-body",children:Object(c.jsx)(h.a,{dataSource:d,columns:f,loading:m,pagination:{pageSize:12},rowKey:function(e){return e.doc_no},onRow:function(t){return{onClick:function(a){e.history.push("/Doc/ManageDetail/".concat(t.doc_no))}}}})})]})})};a(504);function q(e){x.a.get(f.userList).then((function(t){e(t.data.User)})).catch((function(e){console.log(e)}))}var J=a(100),R=a(536),V=a(537),G=N.a.Option,K={labelCol:{span:4},wrapperCol:{span:20}};var Q=function(e){var t=R.a.useForm(),a=Object(l.a)(t,1)[0],s=y;JSON.parse(window.sessionStorage.getItem("sztu_doc_user")).jur,Object(n.useEffect)((function(){var t={};for(var c in e.userData)t[c]=e.userData[c];t.jur=s[t.jur],a.setFieldsValue(t)}),[e.userData]);var i=function(t){var a,c={};for(var n in t)c[n]=t[n];c.jur=s.indexOf(t.jur),a=c,x.a.post(f.userUpdate,a).then((function(e){e.data.status&&alert("\u64cd\u4f5c\u6210\u529f\uff01")})).catch((function(e){alert("\u64cd\u4f5c\u5931\u8d25\uff01"),console.log(e)})).finally((function(){window.location.reload()})),e.changeVisible(!1)};return Object(c.jsx)(V.a,{visible:e.visible,title:"\u7528\u6237\u4fe1\u606f\u7f16\u8f91",okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88",onCancel:function(){console.log(e.userData),e.changeVisible(!1)},onOk:function(){a.validateFields().then((function(e){a.resetFields(),i(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(c.jsxs)(R.a,Object(J.a)(Object(J.a)({},K),{},{form:a,name:"control-hooks",initialValues:e.userData,children:[Object(c.jsx)(R.a.Item,{name:"user_no",label:"\u7528\u6237\u540d",children:e.userData.user_no}),Object(c.jsx)(R.a.Item,{name:"jur",label:"\u6743\u9650",children:Object(c.jsx)(N.a,{children:y.map((function(e){return Object(c.jsx)(G,{value:e,children:e})}))})}),Object(c.jsx)(R.a.Item,{name:"name",label:"\u59d3\u540d",children:Object(c.jsx)(j.a,{})}),Object(c.jsx)(R.a.Item,{name:"phone",label:"\u624b\u673a\u53f7",children:Object(c.jsx)(j.a,{})}),Object(c.jsx)(R.a.Item,{name:"unit",label:"\u5355\u4f4d",children:Object(c.jsx)(N.a,{name:"unit",children:g.map((function(e){return Object(c.jsx)(G,{value:e,children:e},e)}))})}),Object(c.jsx)(R.a.Item,{name:"password",label:"\u4fee\u6539\u5bc6\u7801",children:Object(c.jsx)(j.a,{placeholder:"\u4ec5\u5728\u9700\u8981\u4fee\u6539\u5bc6\u7801\u65f6\u586b\u5199\u8be5\u5b57\u6bb5"})})]}))})},$=N.a.Option,W=j.a.Search;var Y=function(e){var t=Object(n.useState)(!0),a=Object(l.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)([]),r=Object(l.a)(o,2),d=r[0],u=r[1],j=Object(n.useState)(!1),b=Object(l.a)(j,2),O=b[0],m=b[1],p=Object(n.useState)({user_no:"",jur:"",name:"",phone:"",unit:""}),v=Object(l.a)(p,2),y=v[0],w=v[1],_=Object(n.useState)(),k=Object(l.a)(_,2),D=k[0],C=k[1],I=Object(n.useState)(),z=Object(l.a)(I,2),L=z[0],F=z[1],E=[{title:"\u7528\u6237\u540d",key:"user_no",dataIndex:"user_no",align:"center",width:"120px"},{title:"\u5355\u4f4d",key:"unit",dataIndex:"unit",align:"center",width:"210px"},{title:"\u59d3\u540d",key:"name",dataIndex:"name",align:"center",width:"100px"},{title:"\u624b\u673a\u53f7",key:"phone",dataIndex:"phone",align:"center",width:"120px"},{title:"\u6743\u9650",key:"jur",dataIndex:"jur",align:"center",render:function(e,t){var a;switch(e){case 0:a="\u8d85\u7ea7\u7ba1\u7406\u5458";break;case 1:a="\u603b\u7ba1\u7406\u5458";break;case 2:a="\u90e8\u95e8\u7ba1\u7406\u5458";break;case 3:a="\u666e\u901a\u7528\u6237"}return a}},{title:"\u6ce8\u518c\u65f6\u95f4",key:"reg_date",dataIndex:"reg_date",align:"center",width:"200px",render:function(e){var t=new Date(e),a=t.getFullYear()+"-"+parseInt(t.getMonth()+1)+"-"+parseInt(t.getDate())+"    "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return Object(c.jsx)("i",{children:a})}},{title:"\u64cd\u4f5c",key:"action",align:"center",render:function(e,t){return Object(c.jsxs)("div",{children:[Object(c.jsx)(S.a,{style:{color:"#1890ff",borderColor:"#1890ff"},onClick:function(){setTimeout((function(){m(!0),w(t)}),0)},children:"\u7f16\u8f91"})," ",Object(c.jsx)(S.a,{danger:!0,onClick:function(){!function(e){var t={user_no:e};x.a.post(f.userDelete,t).then((function(e){e.data.status?alert("\u64cd\u4f5c\u6210\u529f\uff01"):alert(e.data.errmsg)})).catch((function(e){alert("\u64cd\u4f5c\u5931\u8d25\uff01"),console.log(e)})).finally((function(){window.location.reload()}))}(e.user_no)},children:"\u5220\u9664"})]})}}];function H(e){console.log(e),setTimeout((function(){u(e),i(!1)}),500)}return Object(n.useEffect)((function(){return q(H),function(){q(H)}}),[]),Object(n.useEffect)((function(){!function(e){var t={unit:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",name:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};x.a.post(f.userQuery,t).then((function(t){e(t.data.User)})).catch((function(e){console.log(e)}))}(H,D,L)}),[D,L]),Object(c.jsx)("div",{className:"sp",style:{width:"1440px"},children:Object(c.jsxs)("div",{className:"doclist-container",children:[Object(c.jsx)(W,{placeholder:"\u8f93\u5165\u59d3\u540d\u641c\u7d22",allowClear:!0,value:L,onChange:function(e){F(e.target.value)},style:{width:"360px"}}),Object(c.jsx)(N.a,{name:"unit",placeholder:"\u6309\u90e8\u95e8\u7b5b\u9009",allowClear:"true",value:D,onChange:function(e){C(e)},style:{width:"200px",marginLeft:"50px"},children:g.map((function(e){return Object(c.jsx)($,{value:e,children:e},e)}))}),Object(c.jsx)("main",{className:"userlist-body",children:Object(c.jsx)(h.a,{dataSource:d,columns:E,loading:s,pagination:{pageSize:12},rowKey:function(e){return e.user_no}})}),Object(c.jsx)(Q,{style:{position:"absolute"},visible:O,changeVisible:function(e){return m(e)},userData:y})]})})};function A(e,t){var a={doc_no:e};x.a.post(f.detail,a).then((function(e){var a=new Date(e.data.pub_time);console.log(a instanceof Date);var c=a.getFullYear()+"-"+parseInt(a.getMonth()+1)+"-"+parseInt(a.getDate())+"    "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();e.data.pub_time=c,e.data.date=a.getFullYear()+"\u5e74"+parseInt(a.getMonth()+1)+"\u6708"+parseInt(a.getDate())+"\u65e5",t(e.data)})).catch((function(e){console.log(e)}))}var X=a(541);a(521);var Z=function(e){var t=Object(r.g)().doc_no,a=Object(n.useState)({}),s=Object(l.a)(a,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){A(t,o)}),[]),Object(c.jsx)("div",{className:"detail sp",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsxs)("div",{className:"col detail_container",children:[Object(c.jsx)("div",{className:"detail_title sp",children:i.title}),Object(c.jsxs)("div",{className:"detail_type sp",children:[i.type,"\xa0\xa0\xa0\xa0\xa0",i.pub_time]}),Object(c.jsx)("div",{className:"detail_text",dangerouslySetInnerHTML:{__html:i.text_html}}),Object(c.jsx)("div",{className:"row detail_unit",style:{margin:"160px 0 -20px 0"},children:i.unit}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"row detail_unit",children:i.date})]}),Object(c.jsxs)("div",{className:"detail_msg row",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(O.a,{}),Object(c.jsxs)("a",{href:i.file_url,style:{marginLeft:8},target:"_blank",children:["\u9644\u4ef6:",i.file_name]})]}),Object(c.jsxs)("div",{className:"detail_click_container cz",children:[Object(c.jsx)(X.a,{}),Object(c.jsxs)("div",{style:{marginLeft:8},children:["\u70b9\u51fb\u91cf\uff1a",i.click_count]})]})]})]})})},ee=(a(527),a.p+"static/media/school.0a465115.png");a(528);var te=function(e){var t=Object(r.g)().doc_no,a=Object(n.useState)({}),s=Object(l.a)(a,2),i=s[0],o=s[1],d=Object(n.useState)("none"),u=Object(l.a)(d,2),j=u[0],b=u[1],h=JSON.parse(sessionStorage.getItem("sztu_doc_user"));function m(){e.history.push("/Doc/DocManage")}return Object(n.useEffect)((function(){A(t,o),h.jur<=1&&b("flex")}),[]),Object(c.jsx)("div",{className:"detail sp",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsxs)("div",{className:"col detail_container",children:[Object(c.jsx)("div",{className:"detail_title sp",children:i.title}),Object(c.jsxs)("div",{className:"detail_type sp",children:[i.type,"\xa0\xa0\xa0\xa0\xa0",i.pub_time]}),Object(c.jsx)("div",{className:"detail_text",dangerouslySetInnerHTML:{__html:i.text_html}}),Object(c.jsx)("div",{className:"row detail_unit",style:{margin:"160px 0 -20px 0"},children:i.unit}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"row detail_unit",children:i.date})]}),Object(c.jsxs)("div",{className:"detail_msg row",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(O.a,{}),Object(c.jsxs)("a",{href:i.file_url,style:{marginLeft:8},target:"_blank",children:["\u9644\u4ef6:",i.file_name]})]}),Object(c.jsxs)("div",{className:"detail_click_container cz",children:[Object(c.jsx)(X.a,{}),Object(c.jsxs)("div",{style:{marginLeft:8},children:["\u70b9\u51fb\u91cf\uff1a",i.click_count]})]})]}),Object(c.jsxs)("div",{className:"sp",style:{marginBottom:30},children:[Object(c.jsx)(S.a,{style:{background:"#1990FF",color:"white",display:j},size:"large",className:"detail_btn",shape:"round",onClick:function(){P(t,1,m)},children:"\u5ba1\u6279\u901a\u8fc7"}),Object(c.jsx)(S.a,{size:"large",className:"detail_btn detail_btn2",shape:"round",onClick:function(){P(t,2,m)},style:{display:j},children:"\u5ba1\u6279\u4e0d\u901a\u8fc7"}),Object(c.jsx)(S.a,{style:{background:"red",color:"white",border:"red"},size:"large",className:"detail_btn",shape:"round",onClick:function(){!function(e,t){var a={doc_no:e};1==window.confirm("\u4f60\u786e\u8ba4\u8981\u5220\u9664\u8fd9\u7bc7\u516c\u6587\u5417\uff1f")&&x.a.post(f.docDelete,a).then((function(e){e.data.status&&(alert("\u64cd\u4f5c\u6210\u529f\uff01"),t())})).catch((function(e){alert("\u64cd\u4f5c\u5931\u8d25\uff01"),console.log(e)}))}(t,m)},children:"\u5220\u9664"})]})]})})},ae=a(263);var ce=function(e){var t=e.component,a=Object(ae.a)(e,["component"]),s=JSON.parse(sessionStorage.getItem("sztu_doc_user"));return Object(n.useEffect)((function(){s&&3!=s.jur||alert("\u6743\u9650\u4e0d\u8db3\uff0c\u8bf7\u767b\u5f55\u540e\u91cd\u8bd5\uff01")}),[]),Object(c.jsx)(r.b,Object(J.a)(Object(J.a)({},a),{},{render:function(e){return s&&3!=s.jur?Object(c.jsx)(t,Object(J.a)({},e)):Object(c.jsx)(r.a,{to:{pathname:"/Home/Login"}})}}))};var ne=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),s=a[0],i=a[1];return Object(n.useEffect)((function(){var t=JSON.parse(sessionStorage.getItem("sztu_doc_user"));t?i(t.jur>2?"none":"flex"):(alert("\u8bf7\u767b\u5f55\u540e\u91cd\u8bd5"),e.history.push("/Home/Login"))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("header",{className:"doc-header-container sp",children:Object(c.jsxs)("div",{className:"doc-header row",children:[Object(c.jsx)("img",{src:ee,alt:"",className:"doc-header-school"}),Object(c.jsxs)("nav",{className:"doc-header-nav row",children:[Object(c.jsx)(d.b,{to:"/Doc/DocList",className:"doc-header-nav-item center",activeClassName:"doc-header-nav-item-active",children:"\u516c\u6587\u5c55\u793a"}),Object(c.jsx)(d.b,{to:"/Doc/DocPub",className:"doc-header-nav-item center",activeClassName:"doc-header-nav-item-active",style:{display:s},children:"\u53d1\u5e03\u516c\u6587"}),Object(c.jsx)(d.b,{to:"/Doc/DocManage",className:"doc-header-nav-item center",activeClassName:"doc-header-nav-item-active",style:{display:s},children:"\u516c\u6587\u7ba1\u7406"}),Object(c.jsx)(d.b,{to:"/Doc/UserManage",className:"doc-header-nav-item center",activeClassName:"doc-header-nav-item-active",style:{display:s},children:"\u7528\u6237\u7ba1\u7406"}),Object(c.jsx)(d.b,{to:"/Home",className:"doc-header-nav-item center",activeClassName:"doc-header-nav-item-active",onClick:function(e){sessionStorage.removeItem("sztu_doc_user"),sessionStorage.removeItem("sztu_doc_token")},children:"\u9000\u51fa"})]})]})}),Object(c.jsx)("main",{className:"doc-router-view-container sp",children:Object(c.jsx)("div",{className:"doc-router-view",children:Object(c.jsxs)(r.d,{children:[Object(c.jsx)(r.b,{path:"/Doc/DocList",component:_}),Object(c.jsx)(ce,{path:"/Doc/DocPub",component:M}),Object(c.jsx)(ce,{path:"/Doc/DocManage",component:B}),Object(c.jsx)(ce,{path:"/Doc/UserManage",component:Y}),Object(c.jsx)(r.b,{path:"/Doc/Detail/:doc_no",component:Z}),Object(c.jsx)(ce,{path:"/Doc/ManageDetail/:doc_no",component:te}),Object(c.jsx)(r.a,{from:"/Doc",to:"/Doc/DocList"})]})})}),Object(c.jsx)("footer",{className:"doc-footer-container sp",children:Object(c.jsx)("div",{className:"doc-footer center",children:"Copyright \xa9 \u516c\u6587\u7ba1\u7406\u7cfb\u7edf \xb7 Developed by ChaoWeiwen, XieSenhao, HongQijun, ChenXin"})})]})},se=a(542),ie=a(543);a(529);var oe=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)(""),r=Object(l.a)(o,2),u=r[0],b=r[1];function h(){e.history.push("/Doc")}var O=function(){!function(e,t,a){var c={user_no:e,password:t},n={};x.a.post(f.login,c).then((function(e){if(e.data.status){var t=e.data;n.user_no=t.user,n.reg_date=t.reg_date,n.name=t.name,n.phone=t.phone,n.unit=t.unit,n.jur=t.jur,sessionStorage.setItem("sztu_doc_user",JSON.stringify(n)),sessionStorage.setItem("sztu_doc_token",t.token),a()}else alert("\u767b\u5f55\u5931\u8d25"+e.data.errmsg)})).catch((function(e){alert("\u767b\u5f55\u5931\u8d25"),console.log(e)}))}(s,u,h)},m=function(e){"username"===e.target.name?i(e.target.value):b(e.target.value)};return Object(c.jsxs)("div",{id:"subBox",children:[Object(c.jsx)("div",{id:"loginText",children:"\u767b\u5f55"}),Object(c.jsxs)(R.a,{layout:"horizontal",children:[Object(c.jsx)(R.a.Item,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u8d26\u53f7\uff01"}],children:Object(c.jsx)(j.a,{prefix:Object(c.jsx)(se.a,{className:"site-form-item-icon"}),placeholder:"\u8d26\u53f7",value:s,name:"username",onChange:m,size:"large"})}),Object(c.jsx)(R.a.Item,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801\uff01"}],children:Object(c.jsx)(j.a,{prefix:Object(c.jsx)(ie.a,{className:"site-form-item-icon"}),type:"password",name:"password",placeholder:"Password",value:u,onChange:m,size:"large",onKeyDown:function(e){13===e.keyCode&&O()}})})]}),Object(c.jsx)("button",{id:"loginBtn",onClick:O,children:"\u767b\u5f55"}),Object(c.jsxs)("p",{id:"rigister_Text",children:["\u6ca1\u6709\u8d26\u53f7\uff1f",Object(c.jsx)(d.b,{id:"nl_rg",to:"/Home/Register",children:"\u7acb\u5373\u6ce8\u518c"})]})]})};a(530);var re=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)(),r=Object(l.a)(o,2),u=r[0],b=r[1],h=Object(n.useState)(),O=Object(l.a)(h,2),m=O[0],p=O[1],v=Object(n.useState)(),y=Object(l.a)(v,2),w=y[0],_=y[1],k=Object(n.useState)(),S=Object(l.a)(k,2),D=S[0],C=S[1],I=Object(n.useState)(),z=Object(l.a)(I,2),L=z[0],F=z[1],E=N.a.Option;function H(){e.history.push("/Home/Login")}var M=function(e){switch(e.target.name){case"username":i(e.target.value);break;case"password":b(e.target.value);break;case"confirm":p(e.target.value);break;case"name":_(e.target.value);break;case"phoneNumber":C(e.target.value)}};return Object(c.jsxs)("div",{id:"subBox",children:[Object(c.jsx)("div",{id:"registerText",children:"\u6ce8\u518c"}),Object(c.jsxs)(R.a,{layout:"horizontal",children:[Object(c.jsx)(R.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5de5\u53f7\u6216\u5b66\u53f7!"},{pattern:/^\d{5,12}$/,message:"\u8bf7\u8f93\u51655-12\u4f4d\u7684\u6570\u5b57"}],children:Object(c.jsx)(j.a,{value:s,name:"username",onChange:M,placeholder:"\u5de5\u53f7/\u5b66\u53f7 \uff08\u957f\u5ea6\u4e3a5-12\u4f4d\uff0c\u4ec5\u80fd\u4f7f\u7528\u6570\u5b57\uff09"})}),Object(c.jsx)(R.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801\uff01"},{pattern:/^\w{8,16}$/,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e3a8-16\u4f4d\u7684\u5bc6\u7801\uff0c\u4ec5\u80fd\u4f7f\u7528\u6570\u5b57/\u5b57\u6bcd/\u4e0b\u5212\u7ebf"}],children:Object(c.jsx)(j.a.Password,{value:u,name:"password",onChange:M,placeholder:"\u5bc6\u7801 \uff08\u957f\u5ea6\u4e3a8-16\u4f4d\uff0c\u4ec5\u80fd\u4f7f\u7528\u6570\u5b57/\u5b57\u6bcd/\u4e0b\u5212\u7ebf\uff09"})}),Object(c.jsx)(R.a.Item,{name:"confirm",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u4f60\u7684\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("\u4f60\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4!"):Promise.resolve()}}}],children:Object(c.jsx)(j.a.Password,{value:m,name:"confirm",onChange:M,placeholder:"\u786e\u8ba4\u5bc6\u7801"})}),Object(c.jsx)(R.a.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u59d3\u540d\uff01"},{pattern:/^[\u4e00-\u9fa5]{2,10}$/,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e3a2-10\u4e2a\u4e2d\u6587\u5b57\u7b26\u7684\u59d3\u540d\uff01"}],children:Object(c.jsx)(j.a,{value:w,name:"name",onChange:M,placeholder:"\u59d3\u540d \uff08\u4e2d\u6587\u771f\u5b9e\u59d3\u540d\uff09"})}),Object(c.jsx)(R.a.Item,{name:"phoneNumber",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u624b\u673a\u53f7\u7801\uff01"},{pattern:/^1[3-9]\d{9}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801\uff01"}],children:Object(c.jsx)(j.a,{value:D,name:"phoneNumber",onChange:M,placeholder:"\u624b\u673a\u53f7\u7801"})}),Object(c.jsx)(R.a.Item,{name:"unit",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5355\u4f4d\u6216\u5b66\u9662\uff01"}],children:Object(c.jsx)(N.a,{name:"unit",placeholder:"\u5355\u4f4d/\u5b66\u9662",onSelect:function(e){F(e)},value:L,children:g.map((function(e){return Object(c.jsx)(E,{value:e,children:e},e)}))})})]}),Object(c.jsx)("button",{id:"registerBtn",onClick:function(){!function(e,t,a,c,n,s){var i={user_no:e,password:t,name:a,phone:c,unit:n};x.a.post(f.register,i).then((function(e){e.data.status?(alert("\u6ce8\u518c\u6210\u529f\uff01"),s()):alert("\u6ce8\u518c\u5931\u8d25"+e.data.errmsg)})).catch((function(e){alert("\u6ce8\u518c\u5931\u8d25"),console.log(e)}))}(s,u,w,D,L,H)},children:"\u6ce8\u518c"}),Object(c.jsxs)("p",{id:"login_Text",children:["\u5df2\u6709\u8d26\u53f7\uff1f",Object(c.jsx)(d.b,{id:"nl_lg",to:"/Home/Login",children:"\u7acb\u5373\u767b\u9646"})]})]})},le=a.p+"static/media/SchoolLogo.bf254696.png",de=a.p+"static/media/1034.ef5ebbde.jpg";a(531);var ue=function(){return Object(c.jsx)("div",{id:"bg",children:Object(c.jsxs)("div",{id:"mainBox",children:[Object(c.jsxs)("div",{id:"banner",children:[Object(c.jsx)("img",{id:"schoolLogo",src:le,alt:""}),Object(c.jsx)("span",{children:"\u6df1\u5733\u6280\u672f\u5927\u5b66\u516c\u6587\u901a"})]}),Object(c.jsx)("img",{id:"img1034",src:de,alt:""}),Object(c.jsxs)(r.d,{children:[Object(c.jsx)(r.b,{path:"/Home/Login",component:oe}),Object(c.jsx)(r.b,{path:"/Home/Register",component:re}),Object(c.jsx)(r.a,{from:"/Home",to:"/Home/Login"})]})]})})};var je=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(r.d,{children:[Object(c.jsx)(r.b,{component:ne,path:"/Doc"}),Object(c.jsx)(r.b,{component:ue,path:"/Home"}),Object(c.jsx)(r.a,{from:"/",to:"/Home"})]})})},be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,544)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(d.a,{children:Object(c.jsx)(je,{})})}),document.getElementById("root")),be()}},[[532,1,2]]]);
//# sourceMappingURL=main.40bda9e8.chunk.js.map